---
title: "Lab 8 Espacio Producto"
author: "Cony"
date: "2025-10-02"
output: html_document
---
Hecho con gusto por Maria Concepcion García Pérez

LABORATORIO - RELACIONAMIENTO "CASO HIPOTÉTICO" 

Objetivo: Estimar el relacionamiento (relatedness, proximidad, métrica de distancia entre productos)

En este ejercicio vamos a:
1. Cargar nuestra matriz hipotética de datos
2. Calcular co ocurrencias entre personas y productos 
3. Estimar el relacionamiento, teniendo como input las co ocurrencias
4. Graficar

Cargar paqueterias necesarias
```{r}
install.packages("EconGeo")
library (EconGeo)
```

1.Cómo se mide la proximidad (relatedness) para crear el espacio producto
 Material: Balland, P.A. (2017) Economic Geography in R: Introduction to the EconGeo Package, Papers in Evolutionary Economic Geography, 17 (09): 1-75 
Para instalar: https://www.paballand.com/install-r

Llamar a la matriz hipotetica
```{r}
M = as.matrix(
  read.csv("https://raw.githubusercontent.com/PABalland/ON/master/amz.csv" , 
           sep = ",", 
           header = T, 
           row.names = 1))

M
```

co-ocurrencia entre personas/paises/estados
```{r}
C <- co_occurrence(M, list = FALSE)
c
```

co-ocurrencia entre productos t es transpuesta
```{r}
Ct <- co_occurrence(t(M), list = FALSE)

Ct
```

estima el relacionamiento o proximidad pero normalizado, para asegurar que el numero de co ocurrencias que observamos
```{r}
r <- relatedness(Ct)
```

es mayor al numero de co ocurrencias probables (probailidad condicional)
tie and Surfboard puede que no esten tan relacionados, abajo de  1 no es relacionado mientras que mayor a 1 si es relacionado
```{r}
r[r<1] =0
r[r>1] =1
```

Llamar a la grafica

```{r}
library (igraph)
g1=graph_from_adjacency_matrix(r,mode = "undirected")
plot(g1)
```
